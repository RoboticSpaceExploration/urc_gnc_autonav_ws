<launch>
    <!-- Node to launch RTAB-Map -->
    <node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen">
        <!-- Common parameters -->
        <param name="frame_id" value="base_link"/>
        <param name="odom_frame_id" value="odom"/>
        <param name="map_frame_id" value="map"/>
        <param name="subscribe_depth" value="true"/>
        <param name="subscribe_rgb" value="true"/>
        <param name="subscribe_scan" value="false"/>
        <param name="subscribe_odom_info" value="false"/>
	<param name="publish_tf" value="false"/>

        <!-- RTAB-Map specific parameters -->
        <param name="Rtabmap/DetectionRate" value="1"/>
        <param name="Rtabmap/MaxMappingNodes" value="-1"/>
        <param name="RGBD/LinearUpdate" value="0.1"/>
        <param name="RGBD/AngularUpdate" value="0.1"/>

        <!-- Mapping parameters -->
        <param name="Grid/FromDepth" value="true"/>
        <param name="Grid/Resolution" value="0.05"/>
        <param name="Grid/RangeMin" value="0.3"/>
        <param name="Grid/RangeMax" value="5.0"/>

        <!-- Remapping D435i camera topics -->
        <remap from="rgb/image" to="/d435i/color/image_raw"/>
        <remap from="depth/image" to="/d435i/depth/image_raw"/>
        <remap from="rgb/camera_info" to="/d435i/color/camera_info"/>

        <!-- Remapping T265 odometry topic -->
        <remap from="odom" to="/t265/odom/sample"/>

        <!-- Additional parameters for T265 -->
        <param name="visual_odometry" value="false"/> <!-- Use T265 odometry -->
        <param name="odom_frame_id" value="odom"/>
    </node>

    <!-- Additional nodes for sensor drivers or data processing can be added here -->
</launch>

